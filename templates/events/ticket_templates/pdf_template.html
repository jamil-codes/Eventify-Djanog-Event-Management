{% load tz thumbnail %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{{ ticket.ticket_type.event.title }} | Ticket</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;500&display=swap');
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Roboto', sans-serif;
      }
      html,
      body {
        width: 680px;
        height: 550px;
        background: #fff;
        color: #0f1724;
      }
      
      .container {
        width: 680px;
        height: 550px;
        border: 1px solid #e9edf1;
        overflow: hidden;
        position: relative;
      }
      
      .ticket {
        display: flex;
        flex-direction: column;
        height: 100%;
      }
      
      /* BANNER IMAGE */
      .banner {
        height: 160px;
        background: #0b0f14;
        position: relative;
        overflow: hidden;
      }
      .banner img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: brightness(0.8);
      }
      
      /* HEADER SECTION (title + organizer) */
      .header-section {
        padding: 18px 26px 12px;
        border-bottom: 1px solid #eef2f6;
      }
      .header-section .title {
        font-family: 'Montserrat', sans-serif;
        font-size: 26px;
        font-weight: 700;
        color: #111827;
        margin-bottom: 4px;
      }
      .header-section .organizer {
        font-size: 14px;
        color: #6b7280;
      }
      
      /* BODY (two-column layout) */
      .body {
        display: flex;
        gap: 24px;
        padding: 18px 26px 0;
        flex-grow: 1;
      }
      .col-left {
        width: 60%;
      }
      .col-right {
        width: 40%;
        display: flex;
        justify-content: flex-end;
        align-items: flex-start;
      }
      
      .row {
        margin-bottom: 10px;
        display: flex;
        gap: 10px;
      }
      .label {
        width: 140px;
        font-weight: 700;
        font-size: 13px;
        color: #374151;
        flex-shrink: 0;
      }
      .value {
        font-size: 15px;
        color: #111827;
      }
      
      .separator {
        height: 1px;
        background: #eef2f6;
        margin: 14px 0;
      }
      
      /* QR Section */
      .qr-box {
        background: #fff;
        border: 1px dashed #d1d5db;
        padding: 12px;
        text-align: center;
      }
      .qr-img {
        width: 150px;
        height: 150px;
        object-fit: cover;
        border: 1px solid rgba(12, 18, 28, 0.06);
      }
      .qr-text {
        margin-top: 6px;
        font-size: 12px;
        color: #4b5563;
      }
      
      .accent {
        height: 6px;
        background: linear-gradient(90deg, rgba(214, 167, 46, 0) 0%, rgba(214, 167, 46, 0.35) 50%, rgba(214, 167, 46, 0) 100%);
        margin-top: auto;
      }
      
      /* FOOTER */
      .footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 26px;
        background: #fafafa;
        border-top: 1px solid #e5e7eb;
      }
      .price {
        background: #f3f4f6;
        border: 1px solid #e5e7eb;
        border-radius: 6px;
        padding: 6px 12px;
        font-weight: 700;
        font-size: 17px;
      }
      .status {
        padding: 8px 14px;
        border-radius: 6px;
        font-weight: 700;
        color: #fff;
        font-size: 13px;
      }
      .status.PAID {
        background: #16a34a;
      }
      .status.FREE {
        background: #3b82f6;
      }
      .status.PENDING {
        background: #f59e0b;
      }
      .status.CANCELLED {
        background: #dc2626;
      }
      
      @media print {
        .container {
          border: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="ticket">
        <!-- Banner -->
        <div class="banner">
          {% if ticket.ticket_type.event.image %}
            {% thumbnail ticket.ticket_type.event.image '700x180' crop='center' as thumb %}
            <img src="{{ thumb.url }}" alt="{{ ticket.ticket_type.event.title }}" />
            {% endthumbnail %}
          {% endif %}
        </div>

        <!-- Header Section -->
        <div class="header-section">
          <div class="title">{{ ticket.ticket_type.event.title }}</div>
          <div class="organizer">Organized by {{ ticket.ticket_type.event.organizer.name }}</div>
        </div>

        <!-- Ticket Body -->
        <div class="body">
          <div class="col-left">
            <div class="row">
              <div class="label">Ticket Type:</div>
              <div class="value">{{ ticket.ticket_type.name }}</div>
            </div>
            <div class="row">
              <div class="label">Ticket Code:</div>
              <div class="value">{{ ticket.ticket_code }}</div>
            </div>
            <div class="row">
              <div class="label">Attendee:</div>
              <div class="value">{{ ticket.attendee.name }}</div>
            </div>
            <div class="row">
              <div class="label">Purchase Date:</div>
              <div class="value">{{ ticket.purchase_date|date:'M d, Y · h:i A' }}</div>
            </div>
            <div class="separator"></div>
            <div class="row">
              <div class="label">Event Start:</div>
              <div class="value">
                {% timezone ticket.ticket_type.event.organizer.timezone %}
                {{ ticket.ticket_type.event.start_time|date:'M d, Y · h:i A' }}
                {% endtimezone %}
                <div style="font-size:13px;color:#6b7280;">({{ ticket.ticket_type.event.organizer.timezone }})</div>
              </div>
            </div>
          </div>

          <div class="col-right">
            <div class="qr-box">
              {% if qr_base64 %}
                <img class="qr-img" src="data:image/png;base64,{{ qr_base64 }}" alt="Ticket QR" />
              {% else %}
                <div style="width:150px;height:150px;display:flex;align-items:center;justify-content:center;color:#9ca3af;font-size:12px;">QR Not Available</div>
              {% endif %}
              <div class="qr-text">Scan to verify or check-in</div>
            </div>
          </div>
        </div>

        <div class="accent"></div>

        <div class="footer">
          <div class="price">
            {% if ticket.ticket_type.price > 0 %}
              ${{ ticket.ticket_type.price }}
            {% else %}
              FREE
            {% endif %}
          </div>
          <div class="status {% if ticket.purchase_status == 'A' %}
              





              PAID






            {% elif ticket.purchase_status == 'FRE' %}
              





              FREE






            {% elif ticket.purchase_status == 'P' %}
              





              PENDING






            {% else %}
              





              CANCELLED






            {% endif %}">
            {% if ticket.purchase_status == 'A' %}
              Paid
            {% elif ticket.purchase_status == 'FRE' %}
              Free
            {% elif ticket.purchase_status == 'P' %}
              Pending
            {% else %}
              Cancelled
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
